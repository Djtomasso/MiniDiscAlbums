<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>JANET - Janet Jackson — Tracklist</title>
  <meta name="theme-color" content="#0a0a0a">
  <style>
    :root{--bg:#0a0a0a;--surface:#121212;--surface2:#151515;--text:#f5f5f5;--muted:#c7c7c7;--border:#2a2a2a;--focus:#fff}
    html{scrollbar-gutter:stable both-edges}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial;background:var(--bg);color:var(--text)}
    img{display:block;max-width:100%;height:auto}
    .wrap{max-width:980px;margin-inline:auto;padding:16px;display:grid;gap:16px}
    .topnav{display:flex;gap:10px;align-items:center;padding:10px;background:#0e0e0e;border:1px solid var(--border);border-radius:10px;position:sticky;top:0;z-index:5}
    .homebtn{display:inline-block;background:#191919;border:1px solid var(--border);padding:8px 12px;border-radius:8px;text-decoration:none;color:var(--text)}
    .homebtn:hover{background:#222}
    header.hero{border:1px solid var(--border);background:var(--surface);border-radius:16px;overflow:hidden}
    .cover img{width:100%}
    .titlebar{padding:14px;background:var(--surface2);border-top:1px solid var(--border)}
    h1{margin:0;font-size:1.3rem}
    .sub{color:var(--muted)}

    /* Nieuwe bio-sectie onder de cover/titel */
    .bio{
      border:1px solid var(--border);
      background:#0f0f0f;
      border-radius:12px;
      padding:14px;
      line-height:1.55;
      color:var(--text);
    }
    .bio p{margin:0 0 .9rem 0}
    .bio p:last-child{margin-bottom:0}
    .bio b{color:#fff}

    .toolbar{position:sticky;top:64px;z-index:4;background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:10px}
    .search{display:flex;gap:8px}
    .search input{flex:1;background:#0e0e0e;border:0;color:var(--text);padding:10px;border-radius:10px}
    .search button{background:#151515;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:10px;cursor:pointer}

    main.tracks{display:grid;gap:10px}
    .item{border:1px solid var(--border);background:#0f0f0f;border-radius:12px;padding:12px;display:grid;grid-template-columns:auto 1fr;gap:10px;align-items:start}
    .idx{min-width:36px;height:36px;display:grid;place-items:center;border:1px solid var(--border);border-radius:8px;background:#151515;font-weight:700}
    .meta b{display:block;font-size:1rem;line-height:1.3}
    .artist{display:block;color:var(--muted);margin-top:2px}
    .actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    a.btn{background:#151515;color:var(--text);border:1px solid var(--border);border-radius:8px;padding:8px 10px;text-decoration:none;font-size:.95rem}
    a.btn:focus-visible{outline:2px solid var(--focus);outline-offset:2px}
    footer{color:var(--muted);font-size:.9rem;text-align:center;padding:10px}

    /* Fotoblokken tussen de tracks */
    .galleryRow{border:1px solid var(--border);background:#0f0f0f;border-radius:12px;padding:12px;display:grid;gap:10px}
    .galleryRow h3{margin:0 0 6px 0;font-size:1rem;color:var(--muted);font-weight:600}

    /* Kolommen per viewport: 1 / 2 / 4 */
    .thumbGrid{display:grid;grid-template-columns:1fr;gap:10px}
    @media(min-width:560px){.thumbGrid{grid-template-columns:repeat(2,1fr)}}
    @media(min-width:760px){.thumbGrid{grid-template-columns:repeat(4,1fr)}}

    /* Aspect ratio per viewport: 4:5 / 3:2 / 16:9 */
    .thumb{
      width:100%;
      aspect-ratio:4/5;
      object-fit:cover;
      background:#0c0c0c;border:1px solid #222;border-radius:10px;
      cursor:zoom-in;transition:transform .08s ease;
    }
    @media(min-width:560px){ .thumb{ aspect-ratio:3/2; } }
    @media(min-width:760px){ .thumb{ aspect-ratio:16/9; } }
    .thumb:hover{transform:scale(1.01)}

    /* Lightbox */
    .lightbox{
      position:fixed; inset:0; display:none; place-items:center;
      background:rgba(0,0,0,.86); backdrop-filter:saturate(115%) blur(2px);
      z-index:9999; padding:16px;
    }
    .lightbox.open{display:grid}
    .lb-inner{max-width:min(96vw,1200px);max-height:90vh;position:relative}
    .lb-img{max-width:100%;max-height:90vh;border-radius:12px;border:1px solid #333}
    .lb-ui{position:absolute; inset-inline:0; bottom:-44px; display:flex; justify-content:center; gap:8px}
    .iconbtn{background:#171717;border:1px solid #2a2a2a;color:var(--text);border-radius:999px;padding:.5rem .9rem;cursor:pointer}
    .iconbtn:hover{background:#1e1e1e}
    .lb-close{position:absolute; top:-44px; right:0}
  </style>
</head>
<body>
  <div class="wrap">
    <nav class="topnav" aria-label="Hoofdmenu">
      <a class="homebtn" href="index.html">← Hoofdmenu</a>
    </nav>

    <header class="hero" role="banner">
      <div class="cover"><img id="cover" alt="Albumcover"></div>
      <div class="titlebar">
        <h1 id="albumTitle"></h1>
        <div class="sub" id="subtitle"></div>
      </div>
    </header>

    <!-- KORTE BIO ONDER ALBUMFOTO -->
    <section class="bio" aria-label="Korte biografie van Janet Jackson">
      <p><b>Janet Damita Jo Jackson</b> (geboren op 16 mei 1966 in Gary, Indiana) is een Amerikaanse zangeres, songwriter, danseres en actrice. Als jongste lid van de beroemde Jackson-familie begon ze als kindster in televisieseries zoals <i>Good Times</i> en <i>Fame</i>. Al snel koos ze haar eigen muzikale pad en groeide uit tot een van de invloedrijkste artiesten van haar generatie.</p>
      <p>Met haar derde album <i>Control</i> (1986) brak Janet definitief door. Het was een krachtig statement waarin ze zich losmaakte van het familie-imago en een vernieuwende mix van pop, R&amp;B en rap neerzette. Haar samenwerking met producers Jimmy Jam &amp; Terry Lewis legde de basis voor een reeks baanbrekende hits en een frisse, ritmische sound die de popmuziek blijvend beïnvloedde.</p>
      <p>Het succes werd nog groter met <i>Rhythm Nation 1814</i> (1989). Dit album leverde zeven opeenvolgende top-5-hits op, waarvan vier de nummer-1-positie bereikten, een ongeëvenaard record in de Billboard-geschiedenis. Met zijn sociaal bewuste thema’s en strakke choreografie werd <i>Rhythm Nation</i> een cultureel fenomeen.</p>
      <p>Jackson staat bekend om haar visueel indrukwekkende videoclips en revolutionaire live-shows. Haar krachtige dansroutines en stijlvolle, vaak futuristische looks maakten haar tot een MTV-icoon en een inspiratiebron voor generaties artiesten.</p>
      <p>In de loop van haar carrière won Janet vijf Grammy Awards, elf American Music Awards en tien MTV Video Music Awards. Met meer dan 100 miljoen verkochte platen wereldwijd behoort ze tot de bestverkopende artiesten aller tijden.</p>
      <p><b>Janet Jackson</b> blijft een symbool van onafhankelijkheid, creativiteit en artistieke durf – een icoon die de pop- en R&amp;B-wereld blijvend heeft veranderd.</p>
    </section>

    <nav class="toolbar" aria-label="Zoekbalk">
      <div class="search">
        <input id="filter" type="search" placeholder="Zoek in titels of artiest…" aria-label="Zoek in titels of artiest">
        <button id="clearBtn" type="button">Wissen</button>
      </div>
    </nav>

    <main id="list" class="tracks" aria-live="polite"></main>

    <footer>album samengesteld door Tomasso 2025</footer>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" class="lightbox" role="dialog" aria-modal="true" aria-label="Foto viewer">
    <div class="lb-inner">
      <img id="lb-img" class="lb-img" src="" alt="" />
      <div class="lb-ui">
        <button class="iconbtn" id="lb-prev" aria-label="Vorige foto">◀︎</button>
        <button class="iconbtn" id="lb-next" aria-label="Volgende foto">▶︎</button>
        <button class="iconbtn lb-close" id="lb-close" aria-label="Sluiten">✕</button>
      </div>
    </div>
  </div>

  <!-- Data -->
  <script type="application/json" id="data">{
    "album_title": "JANET - Janet Jackson",
    "subtitle": "",
    "cover": "image/janet-jackson-janet.png",
    "tracks": [
      {"title":"All For You","artist":"Janet Jackson"},
      {"title":"All Nite (Don't Stop)","artist":"Janet Jackson"},
      {"title":"Alright - Shep Pettibone Remix","artist":"Janet Jackson"},
      {"title":"Because Of Love","artist":"Janet Jackson"},
      {"title":"Black Cat","artist":"Janet Jackson"},
      {"title":"Come Back To Me","artist":"Janet Jackson"},
      {"title":"Control","artist":"Janet Jackson"},
      {"title":"Doesn't Really Matter","artist":"Janet Jackson"},
      {"title":"Escapade","artist":"Janet Jackson"},
      {"title":"Go Deep","artist":"Janet Jackson"},
      {"title":"Got 'Til It's Gone","artist":"Janet Jackson ft. Joni Mitchell"},
      {"title":"I Get Lonely","artist":"Janet Jackson"},
      {"title":"If","artist":"Janet Jackson"},
      {"title":"Let's Wait Awhile","artist":"Janet Jackson"},
      {"title":"Lonely","artist":"Janet Jackson"},
      {"title":"Love Will Never Do (Without You)","artist":"Janet Jackson"},
      {"title":"Made For Now - Latin Version","artist":"Janet Jackson ft. Daddy Yankee"},
      {"title":"Miss You Much","artist":"Janet Jackson"},
      {"title":"Nasty","artist":"Janet Jackson"},
      {"title":"Rhythm Nation","artist":"Janet Jackson"},
      {"title":"Runaway","artist":"Janet Jackson"},
      {"title":"Someday Is Tonight","artist":"Janet Jackson"},
      {"title":"Son Of A Gun ( I Betcha Think This Song Is About You)","artist":"Janet Jackson, Carly Simon, Missy Elliott, Jimmy Jam and Terry Lewis"},
      {"title":"State Of The World","artist":"Janet Jackson"},
      {"title":"That's The Way Love Goes","artist":"Janet Jackson"},
      {"title":"The Body That Loves You","artist":"Janet Jackson"},
      {"title":"The Knowledge","artist":"Janet Jackson"},
      {"title":"The Pleasure Principle - Edit","artist":"Janet Jackson"},
      {"title":"Throb","artist":"Janet Jackson"},
      {"title":"Together Again","artist":"Janet Jackson"},
      {"title":"What Have You Done For Me Lately","artist":"Janet Jackson"},
      {"title":"When I Think Of You","artist":"Janet Jackson"},
      {"title":"Whoops Now - Single Version","artist":"Janet Jackson"},
      {"title":"You Want This","artist":"Janet Jackson"}
    ]
  }</script>

  <script>
    /* ===== Basis (titel/cover/zoek) ===== */
    const data = JSON.parse(document.getElementById("data").textContent);
    const $title = document.getElementById("albumTitle");
    const $subtitle = document.getElementById("subtitle");
    const $list = document.getElementById("list");
    const $filter = document.getElementById("filter");
    const $clear = document.getElementById("clearBtn");
    const $cover = document.getElementById("cover");

    $title.textContent = data.album_title || "Album";
    $subtitle.textContent = data.subtitle || "";

    if (data.cover) {
      $cover.src = data.cover;
      $cover.onerror = () => {
        if ($cover.src.endsWith(data.cover)) {
          $cover.onerror = null;
          $cover.src = data.cover.replace(/^image\//, "");
        }
      };
    }

    function escapeHtml(s){ return (s||"").replace(/[&<>"']/g,c=>({"&":"&amp;","<":"&lt;","&gt;":">","\"":"&quot;","'":"&#039;"}[c])); }

    /* ===== Foto's: janet-01..janet-56 met extensie-fallback ===== */
    const PHOTO_COUNT = 56;
    const THUMBS_PER_ROW = 4;
    const START_NUM = 1;
    const makeName = (i) => `janet-${String(i).padStart(2,'0')}`;
    const exts = ['webp','jpg','jpeg','png'];

    function resolveExistingSrc(basePath, basename, extensions){
      return new Promise((resolve)=>{
        let idx = 0, done = false;
        const tryNext = () => {
          if (idx >= extensions.length){
            const svg = encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect width="100" height="100" fill="#0c0c0c"/><text x="50" y="54" text-anchor="middle" font-size="10" fill="#666">no image</text></svg>');
            resolve(`data:image/svg+xml;charset=utf-8,${svg}`); return;
          }
          const url = `${basePath}${basename}.${extensions[idx++]}`;
          const probe = new Image();
          probe.decoding = 'async';
          probe.onload = () => { if(!done){ done=true; resolve(url); } };
          probe.onerror = () => { if(!done) tryNext(); };
          probe.src = url;
        };
        tryNext();
      });
    }

    async function buildSrcList(){
      const base = 'image/janet/';
      const indices = Array.from({length:PHOTO_COUNT}, (_,k)=> START_NUM + k);
      return Promise.all(indices.map(n => resolveExistingSrc(base, makeName(n), exts)));
    }

    /* ===== Interleaving: alleen complete rijen van 4, gelijk verdeeld ===== */
    function computeGroupEvery(tracksLen, photosLen){
      const requiredGroups = Math.ceil(photosLen / THUMBS_PER_ROW);
      return Math.max(1, Math.ceil(tracksLen / requiredGroups));
    }

    
    
    function renderInterleaved(tracks, sources){
      $list.innerHTML = "";

      const tracksLen = tracks.length;
      const totalPhotos = sources.length;

      const GROUP_EVERY = computeGroupEvery(tracksLen, totalPhotos);
      const blockPoints = Math.ceil(tracksLen / GROUP_EVERY);
      const groupsWeCanShow = Math.min(blockPoints, Math.floor(totalPhotos / THUMBS_PER_ROW));

      // We interleave all but the very last possible group
      const interleaveGroups = Math.max(0, groupsWeCanShow - 1);
      const photosPerGroup = THUMBS_PER_ROW;

      let photoIdx = 0;
      let groupIdx = 0;

      tracks.forEach((t, i) => {
        // Trackkaart
        const card = document.createElement("div");
        card.className = "item";

        const idx = document.createElement("div");
        idx.className = "idx";
        idx.textContent = (i+1).toString();
        card.appendChild(idx);

        const meta = document.createElement("div");
        meta.className = "meta";
        meta.innerHTML = `<b>${escapeHtml(t.title||"")}</b><span class="artist">${escapeHtml(t.artist||"")}</span>`;

        const actions = document.createElement("div");
        actions.className = "actions";

        if (t.title || t.artist){
          const a = document.createElement("a");
          a.className = "btn";
          const q = encodeURIComponent(`${t.title||""} ${t.artist||""}`.trim());
          a.href = `https://www.youtube.com/results?search_query=${q}`;
          a.target = "_blank"; a.rel = "noopener noreferrer";
          a.textContent = "YouTube (zoek)";
          actions.appendChild(a);
        }

        const infoBtn = document.createElement("a");
        infoBtn.className = "btn";
        const artist = t.artist || (t.title || "");
        infoBtn.href = `https://nl.wikipedia.org/w/index.php?search=${encodeURIComponent(artist)}`;
        infoBtn.target = "_blank"; infoBtn.rel = "noopener noreferrer";
        infoBtn.textContent = "Wikipedia";
        actions.appendChild(infoBtn);

        meta.appendChild(actions);
        card.appendChild(meta);
        $list.appendChild(card);

        // Interleaved fotoblok op groepsgrenzen, maar maximaliseer tot interleaveGroups
        const isGroupEnd = ((i+1) % GROUP_EVERY === 0) || (i === tracksLen - 1);
        if (isGroupEnd && groupIdx < interleaveGroups){
          const row = document.createElement('div');
          row.className = 'galleryRow';
          row.innerHTML = `<h3>Foto’s</h3>`;

          const grid = document.createElement('div');
          grid.className = 'thumbGrid';

          for (let k=0; k<photosPerGroup; k++){
            if (photoIdx >= totalPhotos) break;
            const globalIndex = photoIdx++;
            const src = sources[globalIndex] || 'data:image/gif;base64,R0lGODlhAQABAAAAACw=';

            const img = document.createElement('img');
            img.className = 'thumb';
            img.alt = `Janet foto ${globalIndex+1}`;
            img.loading = 'lazy';
            img.decoding = 'async';
            img.src = src;
            img.dataset.index = String(globalIndex);
            img.addEventListener('click', (e) => {
              const idx = Number(e.currentTarget.dataset.index);
              openLightbox(idx, sources);
            });

            grid.appendChild(img);
          }

          row.appendChild(grid);
          $list.appendChild(row);
          groupIdx++;
        }
      });

      // Eén slotblok met ALLE resterende foto's (incl. wat anders de laatste interleaved rij was)
      if (photoIdx < totalPhotos){
        const row = document.createElement('div');
        row.className = 'galleryRow';
        row.innerHTML = `<h3>Meer foto’s</h3>`;

        const grid = document.createElement('div');
        grid.className = 'thumbGrid';

        for (let g = photoIdx; g < totalPhotos; g++){
          const src = sources[g] || 'data:image/gif;base64,R0lGODlhAQABAAAAACw=';

          const img = document.createElement('img');
          img.className = 'thumb';
          img.alt = `Janet foto ${g+1}`;
          img.loading = 'lazy';
          img.decoding = 'async';
          img.src = src;
          img.dataset.index = String(g);
          img.addEventListener('click', (e) => {
            const idx = Number(e.currentTarget.dataset.index);
            openLightbox(idx, sources);
          });

          grid.appendChild(img);
        }

        // update index
        photoIdx = totalPhotos;
        row.appendChild(grid);
        $list.appendChild(row);
      }
    }


    /* ===== Filter ===== */
    function applyFilter(allTracks, sources){
      const q = ($filter.value||"").toLowerCase().trim();
      if(!q){ renderInterleaved(allTracks, sources); return; }
      const filtered = allTracks.filter(t =>
        (t.title||"").toLowerCase().includes(q) ||
        (t.artist||"").toLowerCase().includes(q)
      );
      renderInterleaved(filtered, sources);
    }

    $filter.addEventListener("input", () => applyFilter(data.tracks, window.__gallerySources || []));
    $clear.addEventListener("click", () => { $filter.value=""; applyFilter(data.tracks, window.__gallerySources || []); $filter.focus(); });

    /* ===== Lightbox ===== */
    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lb-img');
    const btnPrev = document.getElementById('lb-prev');
    const btnNext = document.getElementById('lb-next');
    const btnClose = document.getElementById('lb-close');
    let current = 0;

    function openLightbox(i, list = window.__gallerySources){
      current = i;
      updateLightbox(list);
      lb.classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    function closeLightbox(){
      lb.classList.remove('open');
      document.body.style.overflow = '';
      lbImg.src = ''; lbImg.alt = '';
    }
    function updateLightbox(list = window.__gallerySources){
      lbImg.src = list[current];
      lbImg.alt = `Janet foto ${current+1}`;
    }
    function prev(list = window.__gallerySources){ current = (current - 1 + list.length) % list.length; updateLightbox(list); }
    function next(list = window.__gallerySources){ current = (current + 1) % list.length; updateLightbox(list); }

    btnPrev?.addEventListener('click', () => prev());
    btnNext?.addEventListener('click', () => next());
    btnClose?.addEventListener('click', closeLightbox);
    lb?.addEventListener('click', (e)=>{ if(e.target === lb) closeLightbox(); });
    document.addEventListener('keydown', (e)=>{
      if(!lb.classList.contains('open')) return;
      if(e.key === 'Escape') closeLightbox();
      if(e.key === 'ArrowLeft') prev();
      if(e.key === 'ArrowRight') next();
    });
    // Swipe
    let sx=0, sy=0;
    lb?.addEventListener('touchstart',(e)=>{ sx=e.touches[0].clientX; sy=e.touches[0].clientY; },{passive:true});
    lb?.addEventListener('touchend',(e)=>{
      const dx=e.changedTouches[0].clientX - sx;
      const dy=e.changedTouches[0].clientY - sy;
      if(Math.abs(dx)>Math.abs(dy) && Math.abs(dx)>30){ dx>0 ? prev() : next(); }
    },{passive:true});

    /* ===== Start ===== */
    (async () => {
      const srcList = await buildSrcList();          // 56 paden (janet-01..janet-56) met extensie-fallback
      window.__gallerySources = srcList;
      applyFilter(data.tracks, srcList);             // render + zoek
    })();
  </script>
</body>
</html>
