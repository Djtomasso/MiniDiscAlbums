<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Sempre Eros Due - Eros Ramazzotti — Tracklist</title>
  <meta name="theme-color" content="#0a0a0a">
  <style>
    :root{--bg:#0a0a0a;--surface:#121212;--surface2:#151515;--text:#f5f5f5;--muted:#c7c7c7;--border:#2a2a2a;--focus:#fff}
    html{scrollbar-gutter:stable both-edges}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial;background:var(--bg);color:var(--text)}
    img{display:block;max-width:100%;height:auto}
    .wrap{max-width:820px;margin:auto;padding:16px;display:grid;gap:16px}
    header.hero{border:1px solid var(--border);background:var(--surface);border-radius:16px;overflow:hidden}
    .topnav{display:flex;gap:10px;align-items:center;padding:10px;background:#0e0e0e;border:1px solid var(--border);border-radius:10px;position:sticky;top:0;z-index:5}
    .homebtn{display:inline-block;background:#191919;border:1px solid var(--border);padding:8px 12px;border-radius:8px;text-decoration:none;color:var(--text)}
    .homebtn:hover{background:#222}
    .cover img{width:100%}
    .titlebar{padding:14px;background:var(--surface2);border-top:1px solid var(--border)}
    h1{margin:0;font-size:1.3rem}
    .sub{color:var(--muted)}
    .toolbar{position:sticky;top:64px;z-index:4;background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:10px}
    .search{display:flex;gap:8px}
    .search input{flex:1;background:#0e0e0e;border:0;color:var(--text);padding:10px;border-radius:10px}
    .search button{background:#151515;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:10px}
    /* BIO-sectie */
    .bio{border:1px solid var(--border);background:#0f0f0f;border-radius:12px;padding:14px;line-height:1.55}
    .bio p{margin:0 0 .9rem 0}
    .bio p:last-child{margin-bottom:0}

    main.tracks{display:grid;gap:10px}
    .item{border:1px solid var(--border);background:#0f0f0f;border-radius:12px;padding:12px;display:grid;grid-template-columns:auto 1fr;gap:10px;align-items:start}
    .idx{min-width:36px;height:36px;display:grid;place-items:center;border:1px solid var(--border);border-radius:8px;background:#151515;font-weight:700}
    .meta b{display:block;font-size:1rem;line-height:1.3}
    .artist{display:block;color:var(--muted);margin-top:2px}
    .actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    a.btn{background:#151515;color:var(--text);border:1px solid var(--border);border-radius:8px;padding:8px 10px;text-decoration:none;font-size:.95rem}
    a.btn:focus-visible{outline:2px solid var(--focus);outline-offset:2px}
    footer{color:var(--muted);font-size:.9rem;text-align:center;padding:10px}

    /* Fotoblokken tussen de tracks */
    .galleryRow{border:1px solid var(--border);background:#0f0f0f;border-radius:12px;padding:12px;display:grid;gap:10px}
    .galleryRow h3{margin:0 0 6px 0;font-size:1rem;color:var(--muted);font-weight:600}

    /* GRID per viewport: mobiel 1, tablet 2, desktop 4 */
    .thumbGrid{display:grid;grid-template-columns:1fr;gap:10px}
    @media(min-width:560px){.thumbGrid{grid-template-columns:repeat(2,1fr)}}
    @media(min-width:760px){.thumbGrid{grid-template-columns:repeat(4,1fr)}}

    /* Aspect-ratio per viewport: 4:5 / 3:2 / 16:9 */
    .thumb{width:100%;aspect-ratio:4/5;object-fit:cover;background:#0c0c0c;border:1px solid #222;border-radius:10px;cursor:zoom-in;transition:transform .08s ease}
    @media(min-width:560px){ .thumb{ aspect-ratio:3/2 } }
    @media(min-width:760px){ .thumb{ aspect-ratio:16/9 } }
    .thumb:hover{transform:scale(1.01)}

    /* Lightbox */
    .lightbox{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.86);backdrop-filter:saturate(115%) blur(2px);z-index:9999;padding:16px}
    .lightbox.open{display:grid}
    .lb-inner{max-width:min(96vw,1200px);max-height:90vh;position:relative}
    .lb-img{max-width:100%;max-height:90vh;border-radius:12px;border:1px solid #333}
    .lb-ui{position:absolute;inset-inline:0;bottom:-44px;display:flex;justify-content:center;gap:8px}
    .iconbtn{background:#171717;border:1px solid #2a2a2a;color:var(--text);border-radius:999px;padding:.5rem .9rem;cursor:pointer}
    .iconbtn:hover{background:#1e1e1e}
    .lb-close{position:absolute;top:-44px;right:0}
  </style>
</head>
<body>
  <div class="wrap">
    <nav class="topnav" aria-label="Hoofdmenu">
      <a class="homebtn" href="index.html">← Hoofdmenu</a>
    </nav>

    <header class="hero" role="banner">
      <div class="cover"><img id="cover" alt="Albumcover"></div>
      <div class="titlebar">
        <h1 id="albumTitle"></h1>
        <div class="sub" id="subtitle"></div>
      </div>
    </header>

<!-- KORTE BIO ONDER ALBUMFOTO (Eros Ramazzotti — Due) -->
<section class="bio" aria-label="Korte biografie van Eros Ramazzotti">
  <p><b>Eros Ramazzotti</b> (1963, Rome) groeide in de jaren tachtig uit tot een van de grootste Italiaanse pop-iconen, geliefd om zijn herkenbare stem en meeslepende melodieën. Na zijn eerste successen werd zijn internationale doorbraak vooral gedragen door drie albums die zijn carrière hebben gedefinieerd.</p>
  <p>Het eerste hoogtepunt was <i>In ogni senso</i> (1990). Met dit album bereikte Ramazzotti voor het eerst een wereldwijd publiek. De single <i>Se bastasse una canzone</i> groeide uit tot een van zijn meest geliefde nummers, waarin zijn vermogen om universele emoties te vertalen naar muziek volledig tot zijn recht kwam. Het album leidde tot optredens in de Verenigde Staten en Latijns-Amerika, waarmee hij zijn reputatie als internationaal artiest vestigde.</p>
  <p>In 1993 volgde <i>Tutte storie</i>, een album dat zijn status nog verder verstevigde. Het leverde de hit <i>Cose della vita</i> op, een nummer dat later in duet met Tina Turner een wereldwijde klassieker werd. Het album combineerde krachtige poprock met de typisch Italiaanse passie en gaf Ramazzotti een vaste plek in de Europese hitlijsten.</p>
  <p>Het derde meesterwerk, <i>Dove c’è musica</i> (1996), betekende een artistieke mijlpaal: voor het eerst produceerde Eros een album volledig zelf. De plaat verkocht miljoenen exemplaren en bracht tijdloze hits voort zoals <i>Più bella cosa</i> en <i>L’aurora</i>. Met dit album bewees hij niet alleen een zanger, maar ook een veelzijdige muzikant en producer te zijn.</p>
</section>


    <nav class="toolbar" aria-label="Zoekbalk">
      <div class="search">
        <input id="filter" type="search" placeholder="Zoek in titels of artiest…" aria-label="Zoek in titels of artiest">
        <button id="clearBtn" type="button">Wissen</button>
      </div>
    </nav>

    <main id="list" class="tracks" aria-live="polite"></main>

    <footer>album samengesteld door Tomasso 2025</footer>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" class="lightbox" role="dialog" aria-modal="true" aria-label="Foto viewer">
    <div class="lb-inner">
      <img id="lb-img" class="lb-img" src="" alt="" />
      <div class="lb-ui">
        <button class="iconbtn" id="lb-prev" aria-label="Vorige foto">◀︎</button>
        <button class="iconbtn" id="lb-next" aria-label="Volgende foto">▶︎</button>
        <button class="iconbtn lb-close" id="lb-close" aria-label="Sluiten">✕</button>
      </div>
    </div>
  </div>

  <!-- Data -->
  <script type="application/json" id="data">{
    "album_title": "Sempre Eros Due - Eros Ramazzotti",
    "subtitle": "",
    "cover": "image/eros-sempre-eros-due.png",
    "tracks": [
      {"title": "L'uragano Meri", "artist": "Eros Ramazzotti"},
      {"title": "Ma che bello questo amore", "artist": "Eros Ramazzotti"},
      {"title": "Memorie", "artist": "Eros Ramazzotti"},
      {"title": "Musica e", "artist": "Eros Ramazzotti"},
      {"title": "Nostalsong", "artist": "Eros Ramazzotti"},
      {"title": "Occhi di speranza", "artist": "Eros Ramazzotti"},
      {"title": "Occhi di speranza", "artist": "Eros Ramazzotti"},
      {"title": "Oggi che giorno e", "artist": "Eros Ramazzotti"},
      {"title": "Per Le Strade Una Canzone (feat. Luis Fonsi)", "artist": "Eros Ramazzotti"},
      {"title": "Per me per sempre", "artist": "Eros Ramazzotti"},
      {"title": "Piu bella cosa", "artist": "Eros Ramazzotti"},
      {"title": "Piu che puoi", "artist": "Eros Ramazzotti with Cher"},
      {"title": "Quasi amore", "artist": "Eros Ramazzotti"},
      {"title": "Questo immenso show", "artist": "Eros Ramazzotti"},
      {"title": "Questo mio vivere un po fuori", "artist": "Eros Ramazzotti"},
      {"title": "Se bastasse una canzone", "artist": "Eros Ramazzotti"},
      {"title": "Senza perderci di vista", "artist": "Eros Ramazzotti"},
      {"title": "Silver e missie", "artist": "Eros Ramazzotti"},
      {"title": "Solo con te", "artist": "Eros Ramazzotti"},
      {"title": "Solo ieri", "artist": "Eros Ramazzotti"},
      {"title": "Sta passando novembre", "artist": "Eros Ramazzotti"},
      {"title": "Stella gemella", "artist": "Eros Ramazzotti"},
      {"title": "Taxi Story", "artist": "Eros Ramazzotti"},
      {"title": "Terra promessa", "artist": "Eros Ramazzotti"},
      {"title": "Terra promessa", "artist": "Eros Ramazzotti"},
      {"title": "Ti sposero perche", "artist": "Eros Ramazzotti"},
      {"title": "Un attimo di pace", "artist": "Eros Ramazzotti"},
      {"title": "Una storia importante", "artist": "Eros Ramazzotti"},
      {"title": "Un'altra te", "artist": "Eros Ramazzotti"},
      {"title": "Un'emozione per sempre", "artist": "Eros Ramazzotti"},
      {"title": "Uno di noi", "artist": "Eros Ramazzotti"},
      {"title": "Yo sin ti", "artist": "Eros Ramazzotti"}
    ]
  }</script>

  <script>
    const data = JSON.parse(document.getElementById("data").textContent);
    const $title = document.getElementById("albumTitle");
    const $subtitle = document.getElementById("subtitle");
    const $list = document.getElementById("list");
    const $filter = document.getElementById("filter");
    const $clear = document.getElementById("clearBtn");
    const $cover = document.getElementById("cover");

    $title.textContent = data.album_title || "Album";
    $subtitle.textContent = data.subtitle || "";

    if (data.cover) {
      $cover.src = data.cover;
      $cover.onerror = () => {
        if ($cover.src.endsWith(data.cover)) {
          $cover.onerror = null;
          $cover.src = data.cover.replace(/^image\//, "");
        }
      };
    }

    function escapeHtml(s){ return (s||"").replace(/[&<>"']/g,c=>({"&":"&amp;","<":"&lt","&gt":">","\"":"&quot;","'":"&#039;"}[c])); }

    /* Afbeeldingen: eros-33..eros-64 (ext: webp/jpg/jpeg/png) */
    const PHOTO_COUNT = 32, THUMBS_PER_ROW = 4, START_NUM = 33;
    const makeName = (i) => `eros-${String(i).padStart(2,'0')}`;
    const exts = ['webp','jpg','jpeg','png'];

    function resolveExistingSrc(basePath, basename, extensions){
      return new Promise((resolve)=>{
        let idx = 0, done = false;
        const tryNext = () => {
          if (idx >= extensions.length){
            const svg = encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect width="100" height="100" fill="#0c0c0c"/><text x="50" y="54" text-anchor="middle" font-size="10" fill="#666">no image</text></svg>');
            resolve(`data:image/svg+xml;charset=utf-8,${svg}`); return;
          }
          const url = `${basePath}${basename}.${extensions[idx++]}`;
          const probe = new Image(); probe.decoding = 'async';
          probe.onload = () => { if(!done){ done=true; resolve(url); } };
          probe.onerror = () => { if(!done) tryNext(); };
          probe.src = url;
        };
        tryNext();
      });
    }

    async function buildSrcList(){
      const base = 'image/eros/';
      const indices = Array.from({length:PHOTO_COUNT}, (_,k)=> START_NUM + k);
      return Promise.all(indices.map(n => resolveExistingSrc(base, makeName(n), exts)));
    }

    function computeGroupEvery(tracksLen, photosLen){
      const requiredGroups = Math.ceil(photosLen / THUMBS_PER_ROW);
      return Math.max(1, Math.ceil(tracksLen / requiredGroups));
    }

    function renderInterleaved(tracks, sources){
      $list.innerHTML = "";
      const tracksLen = tracks.length, totalPhotos = sources.length;
      const GROUP_EVERY = computeGroupEvery(tracksLen, totalPhotos);
      const blockPoints = Math.ceil(tracksLen / GROUP_EVERY);
      const groupsWeCanShow = Math.min(blockPoints, Math.floor(totalPhotos / THUMBS_PER_ROW));
      const photosPerGroup = THUMBS_PER_ROW;

      let photoIdx = 0, groupIdx = 0;

      tracks.forEach((t, i) => {
        const card = document.createElement("div");
        card.className = "item";

        const idx = document.createElement("div");
        idx.className = "idx"; idx.textContent = (i+1).toString();
        card.appendChild(idx);

        const meta = document.createElement("div");
        meta.className = "meta";
        meta.innerHTML = `<b>${escapeHtml(t.title||"")}</b><span class="artist">${escapeHtml(t.artist||"")}</span>`;

        const actions = document.createElement("div");
        actions.className = "actions";

        if (t.title || t.artist){
          const a = document.createElement("a");
          a.className = "btn";
          const q = encodeURIComponent(`${t.title||""} ${t.artist||""}`.trim());
          a.href = `https://www.youtube.com/results?search_query=${q}`;
          a.target = "_blank"; a.rel = "noopener noreferrer";
          a.textContent = "YouTube (zoek)";
          actions.appendChild(a);
        }

        const infoBtn = document.createElement("a");
        infoBtn.className = "btn";
        const artist = t.artist || (t.title || "");
        infoBtn.href = `https://nl.wikipedia.org/w/index.php?search=${encodeURIComponent(artist)}`;
        infoBtn.target = "_blank"; infoBtn.rel = "noopener noreferrer";
        infoBtn.textContent = "Wikipedia";
        actions.appendChild(infoBtn);

        meta.appendChild(actions);
        card.appendChild(meta);
        $list.appendChild(card);

        const isGroupEnd = ((i+1) % GROUP_EVERY === 0) || (i === tracksLen - 1);
        if (isGroupEnd && groupIdx < groupsWeCanShow){
          const row = document.createElement('div'); row.className = 'galleryRow';
          row.innerHTML = `<h3>Foto’s</h3>`;
          const grid = document.createElement('div'); grid.className = 'thumbGrid';

          for (let k=0; k<photosPerGroup; k++){
            const globalIndex = photoIdx;
            const src = sources[globalIndex] || 'data:image/gif;base64,R0lGODlhAQABAAAAACw=';

            const img = document.createElement('img');
            img.className = 'thumb';
            img.alt = `Eros foto ${globalIndex+1}`;
            img.loading = 'lazy'; img.decoding = 'async';
            img.src = src; img.dataset.index = String(globalIndex);
            img.addEventListener('click', (e) => {
              const idx = Number(e.currentTarget.dataset.index);
              openLightbox(idx, sources);
            });

            grid.appendChild(img);
            photoIdx++;
          }

          row.appendChild(grid);
          $list.appendChild(row);
          groupIdx++;
        }
      });
    }

    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lb-img');
    const btnPrev = document.getElementById('lb-prev');
    const btnNext = document.getElementById('lb-next');
    const btnClose = document.getElementById('lb-close');
    let current = 0;

    function openLightbox(i, list = window.__gallerySources){
      current = i; updateLightbox(list);
      lb.classList.add('open');
    }
    function closeLightbox(){ lb.classList.remove('open'); lbImg.src = ''; lbImg.alt = ''; }
    function updateLightbox(list = window.__gallerySources){ lbImg.src = list[current]; lbImg.alt = `Eros foto ${current+1}`; }
    function prev(list = window.__gallerySources){ current = (current - 1 + list.length) % list.length; updateLightbox(list); }
    function next(list = window.__gallerySources){ current = (current + 1) % list.length; updateLightbox(list); }

    btnPrev?.addEventListener('click', () => prev());
    btnNext?.addEventListener('click', () => next());
    btnClose?.addEventListener('click', closeLightbox);
    lb?.addEventListener('click', (e)=>{ if(e.target === lb) closeLightbox(); });
    document.addEventListener('keydown', (e)=>{
      if(!lb.classList.contains('open')) return;
      if(e.key === 'Escape') closeLightbox();
      if(e.key === 'ArrowLeft') prev();
      if(e.key === 'ArrowRight') next();
    });
    let sx=0, sy=0;
    lb?.addEventListener('touchstart',(e)=>{ sx=e.touches[0].clientX; sy=e.touches[0].clientY; },{passive:true});
    lb?.addEventListener('touchend',(e)=>{
      const dx=e.changedTouches[0].clientX - sx, dy=e.changedTouches[0].clientY - sy;
      if(Math.abs(dx)>Math.abs(dy) && Math.abs(dx)>30){ dx>0 ? prev() : next(); }
    },{passive:true});

    (async () => {
      const srcList = await buildSrcList();
      window.__gallerySources = srcList;
      renderInterleaved(data.tracks, srcList);
    })();
  </script>
</body>
</html>
